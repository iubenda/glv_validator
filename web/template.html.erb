<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>GVL Validator</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="icon" href="favicon.ico">

    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div class="container mt-5">
      <h1>Vendorlist Validator</h1>

      <p>vendorlist version: <%= version %></p>
      <p>vendorlist url: <a href="<%= url %>"><%= url %></a></p>
      <p>vendorlist status: <%= errors.empty? ? 'ok' : 'broken' %></p>
      <p>error count: <%= errors.size %></p>
      <p>last check: <%= last_check.strftime('%Y-%m-%d %H:%M:%S %z') %></p>
      <br>

      <% if !errors.empty? %>
        <h3>Errors</h3>
        <ul>
          <% errors.each do |error| %>
            <li>
              <i>vendor</i>: <%= error['vendor']['id'] %>
              <br>
              <i>name</i>: <%= error['vendor']['name'] %>
              <br>
              <i>disclosure url</i>: <a href="<%= error['vendor']['deviceStorageDisclosureUrl'] %>"><%= error['vendor']['deviceStorageDisclosureUrl'] %></a>
              <br>
              <i>error</i>: <%= error['error'] %>
              <br>
              <br>
            </li>
          <% end %>
        </ul>
      <% end %>
  </body>
</html>
